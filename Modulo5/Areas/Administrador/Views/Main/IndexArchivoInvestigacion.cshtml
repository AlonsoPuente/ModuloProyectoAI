@{
    ViewBag.Title = "IndexArchivoInvestigacion";
}

<br />
<br />

<input type="button" class="btn btn btn-info" name="name" value="Nuevo registro" id="btnRegistro" />

<input type="button" class="btn btn btn-primary" name="name" value="Ver registro de descargas" id="btnDescargas" />

<h1>ARCHIVOS DE INVESTIGACION</h1>

<td>



    <p align=justify> Muchas de las grandes innovaciones que han cambiado el mundo han sido producto de un trabajo dedicado y comprometido. Por eso es necesaria la preparación de ingenieros innovadores y creativos. Para la Universidad Esan, la investigación es un paso fundamental para la solución de los problemas del futuro. Por ello sus actividades de investigación atienden temáticas diversas. Se enfocan en temas de energía, agua y medio ambiente, así como en proyectos de desarrollo en materiales, tecnologías de la información y sistemas mecánicos y mecatrónicos. Para esto se utilizan métodos de aprendizaje activo y se fomenta la participación en  proyectos transdisciplinarios en colaboración con importantes instituciones de investigación, nacionales e internacionales. Estos son los archivos de investigación generados por nuestros profesores:</p>
</td>

    <br />
    <br />

    <div id="divListadoArchivoI">

    </div>


    <div id="modalForm" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridSystemModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="gridSystemModalLabel">Añadiendo nuevo archivo de investigación</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-4">.col-md-4</div>
                        <div class="col-md-4 col-md-offset-4">.col-md-4 .col-md-offset-4</div>
                    </div>
                    <div class="row">
                        <div class="col-md-3 col-md-offset-3">.col-md-3 .col-md-offset-3</div>
                        <div class="col-md-2 col-md-offset-4">.col-md-2 .col-md-offset-4</div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-md-offset-3">.col-md-6 .col-md-offset-3</div>
                    </div>
                    <div class="row">
                        <div class="col-sm-9">
                            Level 1: .col-sm-9
                            <div class="row">
                                <div class="col-xs-8 col-sm-6">
                                    Level 2: .col-xs-8 .col-sm-6
                                </div>
                                <div class="col-xs-4 col-sm-6">
                                    Level 2: .col-xs-4 .col-sm-6
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-primary" id="btnSiguiente">Siguiente</button>

                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->


    <div id="modalFormPar" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridSystemModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="gridSystemModalLabel">Añadiendo nuevo archivo de investigación</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-4">.col-md-4</div>
                        <div class="col-md-4 col-md-offset-4">.col-md-4 .col-md-offset-4</div>
                    </div>
                    <div class="row">
                        <div class="col-md-3 col-md-offset-3">.col-md-3 .col-md-offset-3</div>
                        <div class="col-md-2 col-md-offset-4">.col-md-2 .col-md-offset-4</div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-md-offset-3">.col-md-6 .col-md-offset-3</div>
                    </div>
                    <div class="row">
                        <div class="col-sm-9">
                            Level 1: .col-sm-9
                            <div class="row">
                                <div class="col-xs-8 col-sm-6">
                                    Level 2: .col-xs-8 .col-sm-6
                                </div>
                                <div class="col-xs-4 col-sm-6">
                                    Level 2: .col-xs-4 .col-sm-6
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Regresar</button>
                    <button type="button" class="btn btn-primary" id="btnGuardar">Guardar Cambios</button>

                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->




    <script>


        CargarListado();
        function CargarListado() {

            $.ajax({
                type: "POST",
                url: "/Administrador/Main/ListadoAI",
                success: function (html) {
                    $("#divListadoArchivoI").html(html);
                }
            });
        }

        $('#btnRegistro').click(function () {
            var modal = $("#modalForm");
            $.ajax({
                type: "POST",
                url: "/Administrador/Main/FormArchivoI",
                success: function (html) {
                    modal.find(".modal-body").html(html);
                    modal.modal();
                }
            });
        });


        $('#btnSiguiente').click(function () {
            var modal = $("#modalFormPar");
            $.ajax({
                type: "POST",
                url: "/Administrador/Main/Form_Part_ArchivoI",
                success: function (html) {
                    modal.find(".modal-body").html(html);
                    modal.modal();
                }
            });
        });


        $('#btnGuardar').click(function () {
            alert("hola")
            var modal = $("#modalFormPar");

            var vID_Usuario = modal.find(".modal-body #ID_Usuario").val()
            var vRol = modal.find(".modal-body #Rol").val()

            var modal = $("#modalForm");
            var vNombre = modal.find(".modal-body #Nombre").val()
            var vDescripcion = modal.find(".modal-body #Descripcion").val()
            var vFecha_invest = modal.find(".modal-body #Fecha_invest").val()
            var vFecha_pub_ini = modal.find(".modal-body #Fecha_pub_ini").val()
            var vFecha_pub_fin = modal.find(".modal-body #Fecha_pub_fin").val()
            var vFoto = modal.find(".modal-body #Foto").val()
            var vEstado = modal.find(".modal-body #Estado").val()
            var vReferencia = modal.find(".modal-body #Referencia").val()
            var vFecha_crea = modal.find(".modal-body #Fecha_crea").val()
            var vID_Usuario_crea = modal.find(".modal-body #ID_Usuario_crea").val()
            var vFecha_mod = modal.find(".modal-body #Fecha_mod").val()
            var vID_Usuario_mod = modal.find(".modal-body #ID_Usuario_mod").val()
            var vLink_file = modal.find(".modal-body #Link_file").val()
            var vKeywords = modal.find(".modal-body #Keywords").val()
            var vID_proyecto = modal.find(".modal-body #ID_proyecto").val()
            var vAI_Externo = modal.find(".modal-body #AI_Externo").val()

            $.ajax({
                type: "POST",
                url: "/Administrador/Main/GrabarArchivoI",

                data: {
                    Nombre: vNombre, Descripcion: vDescripcion,
                    Fecha_invest: vFecha_invest, Fecha_pub_ini: vFecha_pub_ini, Fecha_pub_fin: vFecha_pub_fin, Foto: vFoto, Estado: vEstado,
                    Referencia: vReferencia, Fecha_crea: vFecha_crea, ID_Usuario_crea: vID_Usuario_crea, Fecha_mod: vFecha_mod, ID_Usuario_mod: vID_Usuario_mod,
                    Link_file: vLink_file, Keywords: vKeywords, ID_Proyecto: vID_proyecto, AI_Externo: vAI_Externo,
                    ID_Usuario: vID_Usuario, Rol: vRol

                },

                success: function (html) {
                    //modal.find(".modal-body").html(html);
                    //modal.modal();
                    //modal.hide();
                    CargarListado();
                }
            });
        });
    </script>
